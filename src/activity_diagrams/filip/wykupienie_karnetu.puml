@startuml "Wykupienie karnetu"
title "Wykupienie karnetu"

|k| klient
|p| pracownik
|s| system

|k|
start
floating note left: Pracownik musi być zalogowany w systemie
:Prośba o utworzenie karnetu;

|p|
:Wybór opcji "Nowy karnet";
repeat
|s|
:Wyświetlenie formularza;

|p|
:Wprowadzenie danych personalnych, płatniczych i kontaktowych;

if (Zatwierdzenie operacji) then (tak)
else (nie)
|p|
:Anuluj operację;
stop
endif

|s|
:Sprawdzenie formatu danych;
repeat while (Poprawny format danych?) is (nie) not (tak)
:Sprawdzenie dostępności metody płatniczej;
:Utworzenie karnetu;
:Pobranie opłaty;
:Wysłanie loginu i tymczasowego hasła do klienta;
:Wyświetenie potwierdzenia;


stop
floating note left: Utworzenie karnetu identyfikującego użytkownika

@enduml